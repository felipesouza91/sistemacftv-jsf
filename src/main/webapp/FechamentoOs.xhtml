<ui:composition template="/template/LayoutPadrao.xhtml" xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
  <f:metadata>
    <f:viewParam name="codigoOs" value="#{fechamentoOsBean.os}" required="true" />
  </f:metadata>

  <ui:define name="titulo">Fechamento de Os</ui:define>

  <ui:define name="conteudo">

    <div class="container custom-container-dvr mt-3 mx-auto">
      <h:messages showSummary="true" showDetail="false" styleClass="list-unstyled" errorClass="alert alert-danger"
        infoClass="alert alert-success" />
      <div class="card">
        <div class="card-header d-flex flex-row justify-content-between align-items-center">
          <div class="d-flex justify-content-between w-100 flex-wrap">
            <div>
              Fechamento da Ordem de serviço:
              <h:outputText value="#{fechamentoOsBean.os.id}" class="fw-bold" />
              -
              Cliente:
              <h:outputText value="#{fechamentoOsBean.os.cliente.fantazia}" class="fw-bold" />
            </div>
            <div>
              <h:link outcome="CadastroOrdemServico" title="Edição de Os" class="btn p-0 me-1 me-md-e">
                <i data-feather="edit"></i>
                <f:param name="codigoOs" value="#{fechamentoOsBean.os.id}" />
                <f:param name="codigoCliente" value="#{fechamentoOsBean.os.cliente.id}" />
              </h:link>
              <h:link outcome="CadastroCliente" class="btn p-0" title="Acessar Cliente">
                <f:param name="codigo" value="#{fechamentoOsBean.os.cliente.id}" />
                <i data-feather="user"></i>
              </h:link>
            </div>
          </div>

        </div>
        <div class="card-body">

          <h:form id="formFechaOs" class="col custom-form">
            <div class="row">
              <div class="col">
                <h:outputLabel class="form-label" value="Data do Fechamento:" title="Data Fechamento" />
                <h:outputText disabled="true" class="form-control"
                  value="#{fechamentoOsBean.fechamento.dataFechamento}">
                  <f:convertDateTime pattern="dd/MM/yyyy HH:mm:ss" />
                </h:outputText>
              </div>
            </div>

            <div class="row mt-2">
              <div class="col-12">
                <h:outputLabel class="form-label" value="Motivo Fechamento" />
                <h:inputText class="form-control" size="30" value="#{fechamentoOsBean.fechamento.motivoFechamento}"
                  required="true" label="Motivo Fechamento" />
              </div>

            </div>
            <div class="row mt-2">
              <div class="col-12">
                <h:outputLabel class="form-label" value="Data da Visita:" />
                <h:inputText class="form-control" converter="com.felipe.converter.dataHtml5" required="true"
                  value="#{fechamentoOsBean.fechamento.dataVisita}" label="Data da Visita">
                  <f:passThroughAttribute name="type" value="date" />
                </h:inputText>
              </div>

            </div>

            <div class="row mt-2">
              <div class="col-12">
                <h:outputLabel class="form-label" value="Nome do Tecnico:" />
                <h:inputText class="form-control" size="30" value="#{fechamentoOsBean.fechamento.tecnico}"
                  label="Nome do Tecnico" required="true" />
              </div>
            </div>

            <div class="row">
              <div class="col-12">
                <h:outputLabel class="form-label" value="Serviço Realizado:" />
                <h:inputTextarea class="form-control" cols="40" rows="7"
                  value="#{fechamentoOsBean.fechamento.observcaoServico}" required="true" label="Serviço Realizado" />
              </div>
            </div>

            <div class="row mt-4">
              <div class="col-3">
                <h:commandButton class="btn btn-success container-fluid" value="Salvar"
                  action="#{fechamentoOsBean.salvar}" />
              </div>
              <div class="col-3">
                <h:button class="btn btn-secondary container-fluid" value="Limpar">
                  <f:passThroughAttribute name="type" value="reset"></f:passThroughAttribute>
                </h:button>
              </div>
            </div>
          </h:form>
        </div>
      </div>
    </div>

  </ui:define>
</ui:composition>